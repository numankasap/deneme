
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merkezi Eğilim ve Yayılım Ölçüleri Testi</title>
    <style>
        :root {
            --neon-color: #0fa;
            --neon-glow: 0 0 10px rgba(10, 255, 170, 0.8),
                         0 0 20px rgba(10, 255, 170, 0.6),
                         0 0 30px rgba(10, 255, 170, 0.4);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            background-color: #121212;
            background-image:
                radial-gradient(circle at 10% 20%, rgba(10, 100, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 10, 100, 0.1) 0%, transparent 20%),
                linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 100%);
            color: #fff;
            overflow-x: hidden;
        }

        .container {
            background-color: rgba(20, 20, 40, 0.8);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0, 150, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 200, 255, 0.1);
            width: 90%;
            max-width: 800px;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
        }

        .container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(100, 255, 255, 0.1) 0%,
                rgba(100, 255, 255, 0) 20%,
                rgba(100, 255, 255, 0) 80%,
                rgba(100, 255, 255, 0.1) 100%
            );
            transform: rotate(30deg);
            z-index: -1;
        }

        h1 {
            color: var(--neon-color);
            text-shadow: 0 0 5px rgba(10, 255, 170, 0.8);
            font-size: 1.8em;
        }

        h2 {
            color: #ffffff;
            text-shadow: none;
            font-size: 1.3em;
            margin-top: 10px;
            margin-bottom: 15px;
            text-align: left;
            padding-left: 10px;
        }

        h3 {
            color: var(--neon-color);
            text-shadow: 0 0 3px rgba(10, 255, 170, 0.6);
            margin-bottom: 5px;
            text-align: left;
        }

        h4 {
            text-align: left;
            color: #eee;
            margin-bottom: 10px;
        }

        .notification {
            background: linear-gradient(135deg, #0fa 0%, #0af 100%);
            color: #121212;
            padding: 10px 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            font-weight: bold;
            opacity: 0;
            transform: translateY(-20px);
            animation: slideIn 0.5s forwards, slideOut 0.5s 2s forwards;
            display: inline-block;
            min-width: 150px;
            height: auto;
            overflow: hidden;
            transition: opacity 0.5s ease, transform 0.5s ease, height 0.5s ease, padding 0.5s ease, margin-bottom 0.5s ease;
        }

        .notification.hidden {
            opacity: 0;
            transform: translateY(-20px);
            height: 0;
            padding-top: 0;
            padding-bottom: 0;
            margin-bottom: 0;
            overflow: hidden;
        }

        .option {
            background: linear-gradient(135deg, rgba(10, 255, 170, 0.2) 0%, rgba(10, 150, 255, 0.2) 100%);
            color: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(100, 200, 255, 0.3);
            text-align: left;
        }

        .option:hover {
            transform: scale(1.03);
            background: linear-gradient(135deg, rgba(10, 255, 170, 0.3) 0%, rgba(10, 150, 255, 0.3) 100%);
            box-shadow: 0 0 8px rgba(10, 255, 170, 0.3);
        }

        .option.selected {
            background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(40, 167, 69, 0.6);
            border-color: #28a745;
        }

        .option.correct {
            background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
            border-color: #1e7e34;
        }

        .option.incorrect {
            background: linear-gradient(135deg, #dc3545 0%, #a71d2a 100%);
            border-color: #a71d2a;
        }

        .options-disabled .option:hover {
            transform: none;
            box-shadow: none;
            cursor: default;
        }

        .options-disabled .option {
            cursor: default;
            opacity: 0.7;
        }

        #timer-container {
            width: 100%;
            height: 15px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin: 10px 0 15px 0;
            overflow: hidden;
            border: 1px solid rgba(100, 200, 255, 0.3);
        }

        #timer {
            height: 100%;
            background-color: #28a745;
            width: 100%;
            border-radius: 10px 0 0 10px;
            transition: width 1s linear, background-color 0.5s ease;
        }

        #timer-text {
            font-size: 1.1em;
            color: #fff;
            margin: 5px 0 10px 0;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        #start-screen, #quiz-screen, #evaluation-screen, #result-screen {
            display: none;
        }

        #start-screen.active, #quiz-screen.active, #evaluation-screen.active, #result-screen.active {
            display: block;
        }

        input[type="text"] {
            padding: 12px 20px;
            width: 80%;
            max-width: 300px;
            border: none;
            border-radius: 25px;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(100, 200, 255, 0.3);
            margin-bottom: 15px;
        }

        input[type="text"]:focus {
            outline: none;
            background-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 15px rgba(10, 255, 255, 0.4);
            border-color: var(--neon-color);
        }

        button {
            background: linear-gradient(135deg, var(--neon-color) 0%, #0af 100%);
            color: #121212;
            border: none;
            padding: 12px 30px;
            font-size: 1rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 0 10px rgba(10, 255, 255, 0.3);
            margin: 10px 5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 18px rgba(10, 255, 255, 0.5);
        }

        button:active {
            transform: translateY(0px);
            box-shadow: 0 0 10px rgba(10, 255, 255, 0.3);
        }

        #next-button {
            margin-top: 15px;
        }

        .instructions {
            text-align: left;
            margin: 20px 0;
            padding: 15px;
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.85);
            background-color: rgba(0,0,0,0.2);
            border-radius: 8px;
            border-left: 3px solid var(--neon-color);
        }

        .instructions h3 {
            margin-top: 0;
            padding-left: 0;
        }

        .instructions p {
            line-height: 1.6;
            margin-bottom: 0;
        }

        .result-details, .evaluation-details {
            text-align: left;
            margin-top: 20px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
            background-color: rgba(0,0,0,0.15);
            border-radius: 8px;
        }

        .result-details h3, .evaluation-details h3 {
            margin-top: 0;
            padding-left: 0;
            border-bottom: 1px solid rgba(100, 200, 255, 0.3);
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        .evaluation-details p {
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .evaluation-details b {
            color: #eee;
        }

        .result-details::-webkit-scrollbar, .evaluation-details::-webkit-scrollbar {
            width: 8px;
        }

        .result-details::-webkit-scrollbar-track, .evaluation-details::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .result-details::-webkit-scrollbar-thumb, .evaluation-details::-webkit-scrollbar-thumb {
            background-color: var(--neon-color);
            border-radius: 10px;
            border: 2px solid rgba(0, 0, 0, 0);
            background-clip: content-box;
        }

        .correct {
            color: #2fcc71;
            font-weight: bold;
        }

        .incorrect {
            color: #ff6b6b;
            font-weight: bold;
        }

        .explanation {
            background-color: rgba(255, 255, 255, 0.08);
            padding: 12px;
            border-radius: 5px;
            margin: 10px 0 0 0;
            font-size: 0.9em;
            border-left: 3px solid #0af;
            color: rgba(255,255,255,0.9);
            line-height: 1.5;
            text-align: left;
        }

        .explanation b {
            color: var(--neon-color);
        }

        .result-details .explanation {
            margin-top: 10px;
        }

        table {
            margin: 15px auto;
            border-collapse: collapse;
            width: 90%;
            font-size: 0.9em;
            background-color: rgba(0,0,0,0.2);
            border-radius: 5px;
            overflow: hidden;
        }

        table, th, td {
            border: 1px solid rgba(100, 200, 255, 0.2);
            padding: 8px;
            text-align: center;
            color: #fff;
        }

        th {
            background-color: rgba(10, 255, 170, 0.2);
            color: var(--neon-color);
            font-weight: bold;
        }

        img.question-image {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        #feedback {
            font-size: 1em;
            margin: 15px 0 0 0;
            display: block;
            min-height: 50px;
            padding-top: 10px;
            text-align: center;
        }

        #feedback .incorrect {
            display: block;
            margin-bottom: 5px;
        }

        #feedback .explanation {
            text-align: left;
            margin-top: 10px;
        }

        @keyframes slideIn {
            0% { opacity: 0; transform: translateY(-20px); height: 0; padding-top: 0; padding-bottom: 0; margin-bottom: 0; }
            100% { opacity: 1; transform: translateY(0); height: auto; padding-top: 10px; padding-bottom: 10px; margin-bottom: 15px; }
        }

        @keyframes slideOut {
            0% { opacity: 1; transform: translateY(0); height: auto; padding-top: 10px; padding-bottom: 10px; margin-bottom: 15px; }
            99% { opacity: 0; transform: translateY(-20px); }
            100% { opacity: 0; transform: translateY(-20px); height: 0; padding-top: 0; padding-bottom: 0; margin-bottom: 0; }
        }

        @media (max-width: 600px) {
            body {
                padding: 10px 0;
                align-items: flex-start;
            }
            .container {
                width: 95%;
                padding: 15px;
            }
            h1 { font-size: 1.5em; }
            h2 {
                font-size: 1.1em;
                padding-left: 5px;
            }
            .option {
                padding: 12px;
                font-size: 0.9em;
            }
            button {
                padding: 10px 25px;
                font-size: 0.9rem;
            }
            input[type="text"] {
                font-size: 0.9rem;
                padding: 10px 15px;
            }
            table {
                width: 100%;
                font-size: 0.8em;
            }
            th, td {
                padding: 5px;
            }
            img.question-image {
                width: 100%;
                margin: 10px 0;
            }
            .explanation {
                font-size: 0.85em;
                padding: 10px;
            }
            #feedback {
                font-size: 0.9em;
                min-height: 40px;
            }
            .instructions {
                font-size: 0.85em;
                padding: 10px;
            }
            .result-details, .evaluation-details {
                max-height: 300px;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="start-screen" class="active">
            <h1>Merkezi Eğilim ve Yayılım Ölçüleri Testi</h1>
            <p>Lütfen adınızı girerek teste başlayın.</p>
            <input type="text" id="user-name" placeholder="Adınız">
            <div class="instructions">
                <h3>Yönerge</h3>
                <p>- Bu test toplam <strong>25</strong> sorudan oluşmaktadır.<br>
                   - Her soru için <strong>3 dakika</strong> süre verilmiştir.<br>
                   - Soruları dikkatlice okuyup şıklardan birine tıklayarak cevaplayın.<br>
                   - Cevapladığınızda geri bildirim alırsınız, ardından 'Sonraki Soru' butonuna tıklayın.<br>
                   - Her <strong>5 soruda bir</strong> ara değerlendirme ile doğru ve yanlışlarınızı göreceksiniz.<br>
                   - Süre dolduğunda otomatik olarak bir sonraki soruya geçilecektir.<br>
                   - Test bitiminde sonuçlarınızı ve tüm soruları/cevapları görebilirsiniz.<br>
                   - Başarılar!</p>
            </div>
            <button onclick="startQuiz()">Testi Başlat</button>
        </div>

        <div id="quiz-screen">
            <div id="notification" class="notification hidden"></div>
            <h2 id="question">Soru yükleniyor...</h2>
            <div id="timer-text">Kalan süre: 3:00</div>
            <div id="timer-container">
                <div id="timer"></div>
            </div>
            <div id="options"></div>
            <div id="feedback"></div>
            <button id="next-button" onclick="nextQuestion()" style="display: none;">Sonraki Soru</button>
        </div>

        <div id="evaluation-screen">
            <h1>Ara Değerlendirme</h1>
            <h2 id="eval-greeting"></h2>
            <p>Doğru Cevap Sayısı: <span id="eval-correct" class="correct"></span></p>
            <p>Yanlış Cevap Sayısı: <span id="eval-wrong" class="incorrect"></span></p>
            <div class="evaluation-details" id="eval-details"></div>
            <button onclick="continueQuiz()">Teste Devam Et</button>
        </div>

        <div id="result-screen">
            <h1>Test Sonuçları</h1>
            <h2 id="greeting"></h2>
            <p>Doğru Cevap Sayısı: <span id="correct-answers" class="correct"></span> / <span id="total-questions-result">25</span></p>
            <p>Yanlış Cevap Sayısı: <span id="wrong-answers" class="incorrect"></span> / <span id="total-questions-result2">25</span></p>
            <p>Başarı Yüzdesi: <span id="percentage"></span>%</p>
            <p id="analysis" style="font-weight: bold; color: var(--neon-color); margin-top: 15px;"></p>
            <div class="result-details" id="result-details">
                <h3>Tüm Sorular, Cevaplarınız ve Açıklamalar:</h3>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "1. Bir sınıftaki öğrencilerin boy uzunlukları (cm): [150, 155, 160, 165, 170]. Bu veri setinin ortalaması nedir?",
                options: ["A) 160 cm", "B) 165 cm", "C) 158 cm", "D) 162 cm", "E) 170 cm"],
                correct: "A) 160 cm",
                explanation: "<b>Çözüm:</b> Ortalama, tüm değerlerin toplamının gözlem sayısına bölünmesiyle bulunur.<br>Toplam: 150 + 155 + 160 + 165 + 170 = 800<br>Gözlem sayısı: 5<br>Ortalama: 800 / 5 = 160 cm."
            },
            {
                question: "2. Bir mağazadaki ürün fiyatları: [15, 20, 20, 25, 30]. Mod (tepe değeri) nedir?",
                options: ["A) 15", "B) 20", "C) 25", "D) 30", "E) Yok"],
                correct: "B) 20",
                explanation: "<b>Çözüm:</b> Mod, en sık tekrar eden değerdir. Fiyatlar: [15, 20, 20, 25, 30]. 20 iki kez tekrar ediyor, diğerleri birer kez. Mod: 20."
            },
            {
                question: "3. Bir kutu grafiği çizmek için veri seti: [10, 20, 30, 40, 50]. Tukey (exclusive) yöntemine göre çeyrekler arası açıklık (IQR) nedir?", // Soru metni netleştirildi
                options: ["A) 20", "B) 30", "C) 40", "D) 25", "E) 15"],
                correct: "B) 30",
                explanation: "<b>Çözüm (Tukey Yöntemi):</b> Veriler sıralı: [10, 20, <b>30</b>, 40, 50]. n=5.<br>Ortanca (Medyan): 30 (Bu değer Q1 ve Q3 hesabına katılmaz).<br>Alt Yarı: [10, 20]. Q1 (Alt yarının ortancası) = (10 + 20) / 2 = 15.<br>Üst Yarı: [40, 50]. Q3 (Üst yarının ortancası) = (40 + 50) / 2 = 45.<br>IQR = Q3 - Q1 = 45 - 15 = 30." // Açıklama Tukey yöntemine göre güncellendi
             },
            {
                question: "4. Bir sınıfta öğrencilerin sınav notları: [60, 70, 70, 80, 90]. Yeni bir öğrenci 75 notuyla sınıfa katılıyor. Yeni medyan nedir?",
                options: ["A) 70", "B) 72.5", "C) 75", "D) 77.5", "E) 80"],
                correct: "B) 72.5",
                explanation: "<b>Çözüm:</b> Yeni veri seti: [60, 70, 70, 75, 80, 90]. Sıralı hali: [60, 70, 70, 75, 80, 90]. Gözlem sayısı 6 (çift), medyan: (3. ve 4. değerlerin ortalaması) = (70 + 75)/2 = 72.5."
            },
            {
                question: "5. Bir histogramda veri seti: [1, 2, 2, 3, 3, 3, 4, 4, 5]. En yüksek frekansa sahip sınıf hangisidir?",
                options: ["A) 1", "B) 2", "C) 3", "D) 4", "E) 5"],
                correct: "C) 3",
                explanation: "<b>Çözüm:</b> Histogramda frekans, her değerin kaç kez göründüğünü gösterir. <br>1: 1 kez, 2: 2 kez, 3: 3 kez, 4: 2 kez, 5: 1 kez. En yüksek frekans: 3 (3 kez)."
            },
            {
                question: "6. Bir mağaza, haftalık satış adetlerini analiz ediyor: [5, 10, 10, 15, 20]. Eğer bir ürünün satışı 10’dan fazlaysa 'Yüksek' olarak sınıflandırılıyor, kaç ürün yüksek satışlıdır?",
                options: ["A) 1", "B) 2", "C) 3", "D) 4", "E) 5"],
                correct: "B) 2",
                explanation: "<b>Çözüm:</b> Veriler: [5, 10, 10, 15, 20]. 10’dan büyük olanlar: 15 ve 20. Toplam: 2 ürün."
            },
            {
                question: "7. Nokta grafiği için veri: [(1, 2), (2, 4), (3, 6), (4, 8)]. Eğer bir sonraki nokta (5, y) eklenirse ve y-ekseni ortalaması 5 olacaksa, y nedir?",
                options: ["A) 5", "B) 6", "C) 7", "D) 8", "E) 10"],
                correct: "A) 5",
                explanation: "<b>Çözüm:</b> Mevcut y-ekseni değerleri: [2, 4, 6, 8]. Toplam: 2 + 4 + 6 + 8 = 20. Yeni ortalama 5, gözlem sayısı 5. Yeni toplam: 5 * 5 = 25. y = 25 - 20 = 5."
            },
            {
               question: "8. Bir spor salonunda üyelerin haftalık egzersiz süreleri (saat): [2, 3, 3, 4, 5]. Tukey (exclusive) yöntemine göre hesaplanan çeyrekler dikkate alındığında, 3 saat egzersiz yapan bir üye hangi çeyrekte veya konumda yer alır?", // Soru metni netleştirildi
                options: ["A) Q1 Altında", "B) Q1 ile Q2 Arasında", "C) Q2 (Medyan)", "D) Q2 ile Q3 Arasında", "E) Q3 Üstünde"], // Şıklar daha açıklayıcı hale getirildi
                correct: "C) Q2 (Medyan)", // Doğru cevap metni düzeltildi (Medyan Q2'dir)
                explanation: "<b>Çözüm (Tukey Yöntemi):</b> Veriler sıralı: [2, 3, <b>3</b>, 4, 5]. n=5.<br>Ortanca (Medyan, Q2): 3.<br>Alt Yarı: [2, 3]. Q1 = (2+3)/2 = 2.5.<br>Üst Yarı: [4, 5]. Q3 = (4+5)/2 = 4.5.<br>3 saatlik egzersiz süresi tam olarak Medyan (Q2) değerine eşittir." // Açıklama Tukey yöntemine göre güncellendi
            },
            {
                question: "9. Bir kutu grafiği için veri: [10, 15, 20, 25, 30]. Eğer bir veri noktası eklenirse ve yeni medyan 20 olacaksa, eklenecek değer hangi aralıkta olmalıdır?",
                options: ["A) 15-20", "B) 20-25", "C) 10-15", "D) 25-30", "E) 10-20"],
                correct: "B) 20-25",
                explanation: "<b>Çözüm:</b> Mevcut medyan: 20. Yeni veri seti 6 elemanlı olacak, medyan 3. ve 4. değerlerin ortalaması. Medyan 20 için, yeni değer 20 ile 25 arasında olmalı ki sıralama sonrası medyan 20 kalsın."
            },
            {
                question: "10. Histogram için veri: [5, 5, 10, 10, 10, 15, 15]. Eğer bir histogram çizilirse ve sınıflar [5-10), [10-15), [15-20) şeklinde tanımlanırsa, en yüksek frekansa sahip sınıf hangisidir?",
                options: ["A) [5-10)", "B) [10-15)", "C) [15-20)", "D) [5-15)", "E) [10-20)"],
                correct: "B) [10-15)",
                explanation: "<b>Çözüm:</b> Frekanslar: [5-10): 2 (5, 5), [10-15): 3 (10, 10, 10), [15-20): 2 (15, 15). En yüksek: [10-15) (3 kez)."
            },
            {
                question: "11. Bir okulda öğrencilerin sınav notları: [50, 60, 70, 80, 90]. Eğer okul, ortalamanın üzerinde not alan öğrencileri ödüllendirecekse, kaç öğrenci ödül alır?",
                options: ["A) 1", "B) 2", "C) 3", "D) 4", "E) 5"],
                correct: "B) 2",
                explanation: "<b>Çözüm:</b> Ortalama: (50+60+70+80+90)/5 = 350/5 = 70. 70’ten büyük notlar: 80, 90. Toplam: 2 öğrenci."
            },
            {
                question: "12. Nokta grafiği için veri: [(1, 3), (2, 5), (3, 7), (4, 9), (5, 11)]. Eğer y-ekseni değerleri bir histogramda gösterilirse, [5-10) sınıfının frekansı nedir?",
                options: ["A) 1", "B) 2", "C) 3", "D) 4", "E) 5"],
                correct: "B) 2",
                explanation: "<b>Çözüm:</b> Y-ekseni değerleri: [3, 5, 7, 9, 11]. [5-10) sınıfı: 5 ve 7 (9 dahil, 10 hariç). Frekans: 2."
            },
            {
                 question: "13. Bir kutu grafiği için veri: [10, 20, 30, 40, 50, 60]. Tukey (exclusive) yöntemine göre, veri setine bir değer eklendiğinde yeni Q1'in 10 olması için eklenecek değer hangi aralıkta olmalıdır?", // Soru hedefi ve metni değiştirildi
                options: ["A) 10-20", "B) 20-30", "C) 0-10", "D) 30-40", "E) 40-50"], // Doğru cevap (C) aynı kaldı
                correct: "C) 0-10", // Doğru cevap şıkkı aynı kaldı
                explanation: "<b>Çözüm (Tukey Yöntemi):</b> Mevcut sıralı veri: [10, 20, 30, 40, 50, 60]. n=6. Mevcut Q1 (ilk 3 terimin medyanı) = 20.<br>Bir değer (x) eklenince n=7 olur. Q1, yeni sıralı listenin ilk 3 teriminin medyanı (yani 2. terimi) olacaktır.<br>Yeni Q1'in 10 olması için sıralı listenin '[x, 10, ...]' şeklinde başlaması gerekir. Bu durum, eklenen x değerinin 10 veya 10'dan küçük olmasıyla ($\leq 10$) sağlanır. Verilen aralıklardan buna uyan '0-10' aralığıdır (negatif olmayan değerler varsayarsak)." // Açıklama yeni hedefe göre güncellendi
           },
            {
                question: "14. Bir şirketin çalışanlarının yaşları: [25, 30, 35, 40, 45]. Eğer bir yeni çalışan katılırsa ve ortalama yaş 35 olacaksa, yeni çalışanın yaşı nedir?",
                options: ["A) 30", "B) 35", "C) 40", "D) 45", "E) 50"],
                correct: "B) 35",
                explanation: "<b>Çözüm:</b> Mevcut toplam: 25+30+35+40+45 = 175. Yeni ortalama: 35, gözlem sayısı: 6. Yeni toplam: 35 * 6 = 210. Yeni yaş: 210 - 175 = 35."
            },
            {
                question: "15. Histogram için veri: [2, 2, 3, 3, 3, 4, 4, 5]. Eğer sınıflar [2-3), [3-4), [4-5) şeklinde tanımlanırsa, [3-4) sınıfının frekansı nedir?",
                options: ["A) 1", "B) 2", "C) 3", "D) 4", "E) 5"],
                correct: "C) 3",
                explanation: "<b>Çözüm:</b> [3-4): 3, 3, 3. Frekans: 3."
            },
            {
                question: "16. Bir basketbol takımında oyuncuların attığı sayılar: [10, 15, 15, 20, 25]. Tukey (exclusive) yöntemine göre hesaplanan çeyrekler dikkate alındığında, maçta 15 sayı atan bir oyuncu hangi çeyrekte veya konumda yer alır?", // Soru metni netleştirildi
                options: ["A) Q1 Altında", "B) Q1 ile Q2 Arasında", "C) Q2 (Medyan)", "D) Q2 ile Q3 Arasında", "E) Q3 Üstünde"], // Şıklar daha açıklayıcı hale getirildi
                correct: "C) Q2 (Medyan)", // Doğru cevap metni düzeltildi (Medyan Q2'dir)
                explanation: "<b>Çözüm (Tukey Yöntemi):</b> Veriler sıralı: [10, 15, <b>15</b>, 20, 25]. n=5.<br>Ortanca (Medyan, Q2): 15.<br>Alt Yarı: [10, 15]. Q1 = (10+15)/2 = 12.5.<br>Üst Yarı: [20, 25]. Q3 = (20+25)/2 = 22.5.<br>15 sayı tam olarak Medyan (Q2) değerine eşittir." // Açıklama Tukey yöntemine göre güncellendi
          },
            {
                question: "17. Nokta grafiği için veri: [(1, 1), (2, 2), (3, 3), (4, 4)]. Eğer bir sonraki nokta (5, y) eklenirse ve y-ekseni medyanı 3 olacaksa, y nedir?",
                options: ["A) 1", "B) 2", "C) 3", "D) 4", "E) 5"],
                correct: "C) 3",
                explanation: "<b>Çözüm:</b> Mevcut y-ekseni: [1, 2, 3, 4]. Yeni medyan: 3. Yeni veri seti: [1, 2, 3, 4, y]. Sıralı hali: [1, 2, 3, 4, y]. Medyan (3. değer): 3. y = 3."
            },
            {
               question: "18. Bir kutu grafiği için veri: [5, 10, 15, 20, 25]. Tukey (exclusive) yöntemine göre, veri setine bir değer eklendiğinde yeni Q3'ün 25 olması için eklenecek değer hangi aralıkta olmalıdır?", // Soru hedefi ve metni değiştirildi
                options: ["A) 20-25", "B) 15-20", "C) 10-15", "D) 25 veya üzeri", "E) 5-10"], // Şıklar değiştirildi
                correct: "D) 25 veya üzeri", // Doğru cevap şıkkı ve metni değiştirildi
                explanation: "<b>Çözüm (Tukey Yöntemi):</b> Mevcut sıralı veri: [5, 10, 15, 20, 25]. n=5. Mevcut Q3 = (20+25)/2 = 22.5.<br>Bir değer (x) eklenince n=6 olur. Q3, yeni sıralı listenin son 3 teriminin medyanı olacaktır.<br>Yeni Q3'ün 25 olması için son 3 terimin medyanının 25 olması gerekir. Bu durum, eklenen x değerinin 25 veya daha büyük olmasıyla ($x \geq 25$) sağlanır. Örneğin, x=30 eklenirse liste [5, 10, 15, 20, 25, 30] olur, son 3 terim [20, 25, 30], medyanı 25'tir (Yeni Q3=25). x=25 eklenirse liste [5, 10, 15, 20, 25, 25] olur, son 3 terim [20, 25, 25], medyanı 25'tir (Yeni Q3=25). Bu nedenle, eklenecek değer 25 veya üzerinde olmalıdır." // Açıklama yeni hedefe göre güncellendi
           },
            {
                question: "19. Bir sınıfta öğrencilerin test notları: [60, 65, 70, 75, 80]. Eğer bir öğrenci 70 notuyla sınıfa katılırsa, yeni mod nedir?",
                options: ["A) 60", "B) 65", "C) 70", "D) 75", "E) 80"],
                correct: "C) 70",
                explanation: "<b>Çözüm:</b> Yeni veri seti: [60, 65, 70, 70, 75, 80]. 70 iki kez, diğerleri birer kez. Mod: 70."
            },
            {
                question: "20. Histogram için veri: [1, 1, 1, 2, 2, 3]. Eğer sınıflar [1-2), [2-3), [3-4) şeklinde tanımlanırsa, [1-2) sınıfının frekansı nedir?",
                options: ["A) 1", "B) 2", "C) 3", "D) 4", "E) 5"],
                correct: "C) 3",
                explanation: "<b>Çözüm:</b> [1-2): 1, 1, 1. Frekans: 3."
            },
            {
                question: "21. Nokta grafiği için veri: [(1, 5), (2, 10), (3, 15)]. Eğer bir sonraki nokta (4, y) eklenirse ve y-ekseni ortalaması 10 kalacaksa, y nedir?",
                options: ["A) 5", "B) 10", "C) 15", "D) 20", "E) 25"],
                correct: "B) 10",
                explanation: "<b>Çözüm:</b> Mevcut y-ekseni: [5, 10, 15]. Toplam: 30. Yeni ortalama: 10, gözlem sayısı: 4. Yeni toplam: 10 * 4 = 40. y = 40 - 30 = 10."
            },
            {
                question: "22. Bir mağazada ürünlerin fiyatları: [10, 20, 20, 30, 40]. Eğer bir ürünün fiyatı medyanın altındaysa indirime giriyor. Kaç ürün indirime girer?",
                options: ["A) 1", "B) 2", "C) 3", "D) 4", "E) 5"],
                correct: "B) 2",
                explanation: "<b>Çözüm:</b> Medyan: 20. Medyanın altında: 10, 20. Toplam: 2 ürün."
            },
            {
                question: "23. Bir kutu grafiği için veri: [10, 15, 20, 25, 30]. Eğer bir veri noktası eklenirse ve yeni IQR 12 olacaksa, eklenecek değer hangi aralıkta olmalıdır?",
                options: ["A) 10-15", "B) 15-20", "C) 20-25", "D) 25-30", "E) 0-10"],
                correct: "B) 15-20",
                explanation: "<b>Çözüm:</b> Mevcut IQR: 25 - 15 = 10. Yeni IQR: 12. Yeni değer 15-20 arasında olmalı ki Q1 ve Q3 değişsin ve IQR 12 olsun."
            },
            {
                question: "24. Bir okulda öğrencilerin boy uzunlukları (cm): [150, 155, 160, 165, 170]. Eğer bir öğrenci 162 cm boyuyla sınıfa katılırsa, yeni medyan nedir?",
                options: ["A) 160", "B) 161", "C) 162", "D) 162.5", "E) 165"],
                correct: "B) 161",
                explanation: "<b>Çözüm:</b> Yeni veri seti: [150, 155, 160, 162, 165, 170]. Sıralı hali: [150, 155, 160, 162, 165, 170]. Gözlem sayısı 6 (çift), medyan: (3. ve 4. değerlerin ortalaması) = (160 + 162)/2 = 161."
            },
            {
                question: "25. Histogram için veri: [10, 10, 20, 20, 20, 30]. Eğer sınıflar [10-20), [20-30), [30-40) şeklinde tanımlanırsa, [20-30) sınıfının frekansı nedir?",
                options: ["A) 1", "B) 2", "C) 3", "D) 4", "E) 5"],
                correct: "C) 3",
                explanation: "<b>Çözüm:</b> [20-30): 20, 20, 20. Frekans: 3."
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let timerInterval;
        let timeLeft = 180;
        let userName = "";
        const totalQuestions = questions.length;

        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const evaluationScreen = document.getElementById('evaluation-screen');
        const resultScreen = document.getElementById('result-screen');
        const questionEl = document.getElementById('question');
        const optionsDiv = document.getElementById('options');
        const feedbackDiv = document.getElementById('feedback');
        const nextButton = document.getElementById('next-button');
        const timerTextEl = document.getElementById('timer-text');
        const timerBar = document.getElementById('timer');
        const notificationDiv = document.getElementById('notification');
        const userNameInput = document.getElementById('user-name');

        function startQuiz() {
            userName = userNameInput.value.trim();
            if (!userName) {
                alert("Lütfen adınızı girin.");
                userNameInput.focus();
                return;
            }
            startScreen.classList.remove('active');
            quizScreen.classList.add('active');
            displayQuestion();
        }

        function displayQuestion() {
            clearInterval(timerInterval);
            timeLeft = 180;
            updateTimerDisplay();

            if (currentQuestionIndex < totalQuestions) {
                const questionData = questions[currentQuestionIndex];
                questionEl.innerHTML = questionData.question;
                optionsDiv.innerHTML = '';
                optionsDiv.classList.remove('options-disabled');

                questionData.options.forEach(optionText => {
                    const optionElement = document.createElement('div');
                    optionElement.classList.add('option');
                    optionElement.innerHTML = optionText;
                    optionElement.onclick = () => selectAnswer(optionText, optionElement);
                    optionsDiv.appendChild(optionElement);
                });

                feedbackDiv.innerHTML = '';
                nextButton.style.display = 'none';
                startTimer();
            }
        }

        function selectAnswer(selectedOption, selectedElement) {
            clearInterval(timerInterval);
            const questionData = questions[currentQuestionIndex];
            const correctAnswer = questionData.correct;
            optionsDiv.classList.add('options-disabled');
            const allOptionElements = optionsDiv.querySelectorAll('.option');

            allOptionElements.forEach(opt => opt.onclick = null);

            userAnswers[currentQuestionIndex] = {
                question: questionData.question,
                selected: selectedOption,
                correct: correctAnswer,
                isCorrect: selectedOption === correctAnswer,
                explanation: questionData.explanation
            };

            selectedElement.classList.add('selected');

            feedbackDiv.innerHTML = '';

            if (selectedOption === correctAnswer) {
                score++;
                selectedElement.classList.add('correct');
                showNotification("Doğru!", "correct");
            } else {
                selectedElement.classList.add('incorrect');
                allOptionElements.forEach(opt => {
                    if (opt.innerHTML.trim() === correctAnswer.trim()) {
                        opt.classList.add('correct');
                    }
                });
                showNotification("Yanlış!", "incorrect");
            }

            setTimeout(() => {
                const explanationDiv = document.createElement('div');
                explanationDiv.classList.add('explanation');
                explanationDiv.innerHTML = questionData.explanation;
                feedbackDiv.appendChild(explanationDiv);
                nextButton.style.display = 'inline-block';
            }, 300);
        }

        function nextQuestion() {
            feedbackDiv.innerHTML = '';
            nextButton.style.display = 'none';
            notificationDiv.classList.add('hidden');

            currentQuestionIndex++;

            if (currentQuestionIndex > 0 && currentQuestionIndex % 5 === 0 && currentQuestionIndex < totalQuestions) {
                showEvaluation();
            } else if (currentQuestionIndex < totalQuestions) {
                displayQuestion();
            } else {
                showResult();
            }
        }

        function showEvaluation() {
            clearInterval(timerInterval);
            quizScreen.classList.remove('active');
            evaluationScreen.classList.add('active');

            const startSlice = Math.max(0, currentQuestionIndex - 5);
            const lastFiveAnswers = userAnswers.slice(startSlice, currentQuestionIndex);
            const answeredCount = lastFiveAnswers.filter(ans => ans !== undefined).length;
            const correctCount = lastFiveAnswers.filter(ans => ans && ans.isCorrect).length;
            const wrongCount = answeredCount - correctCount;

            document.getElementById('eval-greeting').innerText = `${userName}, ${currentQuestionIndex}. soruyu tamamladın! Son ${answeredCount} sorudaki durumun:`;
            document.getElementById('eval-correct').innerText = correctCount;
            document.getElementById('eval-wrong').innerText = wrongCount;

            const evalDetailsDiv = document.getElementById('eval-details');
            evalDetailsDiv.innerHTML = `<h4>Son ${answeredCount} Soru Detayları:</h4>`;
            evalDetailsDiv.scrollTop = 0;

            lastFiveAnswers.forEach((answer, index) => {
                if (!answer) return;

                const detail = document.createElement('p');
                const questionNumber = startSlice + index + 1;
                const selectedShort = (answer.selected || '').length > 30 ? answer.selected.substring(0, 27) + '...' : (answer.selected || '');
                const correctShort = (answer.correct || '').length > 30 ? answer.correct.substring(0, 27) + '...' : (answer.correct || '');

                let resultHTML;
                if (answer.selected === "Süre Doldu") {
                    resultHTML = `<span class="incorrect">Süre Doldu</span> (Doğru: ${correctShort})`;
                } else {
                    resultHTML = answer.isCorrect ? '<span class="correct">Doğru</span>' : `<span class="incorrect">Yanlış</span> (Doğru: ${correctShort})`;
                }

                detail.innerHTML = `<b>Soru ${questionNumber}:</b> ${resultHTML} - Seçiminiz: ${selectedShort}`;
                evalDetailsDiv.appendChild(detail);
            });
        }

        function continueQuiz() {
            evaluationScreen.classList.remove('active');
            quizScreen.classList.add('active');
            displayQuestion();
        }

        function showResult() {
            clearInterval(timerInterval);
            quizScreen.classList.remove('active');
            evaluationScreen.classList.remove('active');
            resultScreen.classList.add('active');

            const answeredQuestions = userAnswers.filter(ans => ans !== undefined);
            score = answeredQuestions.filter(ans => ans.isCorrect).length;
            const wrongAnswers = answeredQuestions.length - score;
            const percentage = totalQuestions > 0 ? ((score / totalQuestions) * 100).toFixed(2) : 0;

            document.getElementById('greeting').innerText = `Tebrikler ${userName}! Testi tamamladın.`;
            document.getElementById('correct-answers').innerText = score;
            document.getElementById('total-questions-result').innerText = totalQuestions;
            document.getElementById('wrong-answers').innerText = wrongAnswers;
            document.getElementById('total-questions-result2').innerText = totalQuestions;
            document.getElementById('percentage').innerText = percentage;

            let analysisText = "";
            if (percentage >= 85) analysisText = "Harika iş çıkardın!";
            else if (percentage >= 70) analysisText = "Çok iyi! Biraz daha pratikle mükemmel olabilir.";
            else if (percentage >= 50) analysisText = "İyi bir başlangıç. Konuları tekrar gözden geçirebilirsin.";
            else analysisText = "Daha çok çalışmalısın. Pes etme!";
            document.getElementById('analysis').innerText = analysisText;

            const resultDetailsDiv = document.getElementById('result-details');
            resultDetailsDiv.innerHTML = '<h3>Tüm Sorular, Cevaplarınız ve Açıklamalar:</h3>';
            resultDetailsDiv.scrollTop = 0;

            questions.forEach((questionData, index) => {
                const answer = userAnswers[index];

                const detailDiv = document.createElement('div');
                detailDiv.style.marginBottom = '15px';
                detailDiv.style.paddingBottom = '10px';
                detailDiv.style.borderBottom = '1px solid rgba(100, 200, 255, 0.3)';

                const questionP = document.createElement('p');
                questionP.innerHTML = `<b>${index + 1}. Soru:</b> ${questionData.question}`;
                detailDiv.appendChild(questionP);

                const answerP = document.createElement('p');
                let selectedText = '<span style="color:orange; font-weight:bold;">Cevaplanmadı</span>';
                let resultText = '<span class="incorrect">Yanlış</span>';

                if (answer) {
                    selectedText = answer.selected === "Süre Doldu" ? '<span style="color:orange; font-weight:bold;">Süre Doldu</span>' : answer.selected;
                    resultText = answer.isCorrect ? '<span class="correct">Doğru</span>' : '<span class="incorrect">Yanlış</span>';
                    if (answer.selected === "Süre Doldu") resultText = '<span class="incorrect">Yanlış (Süre Doldu)</span>';
                }

                answerP.innerHTML = `Seçiminiz: ${selectedText} - ${resultText}`;
                detailDiv.appendChild(answerP);

                if (!answer || !answer.isCorrect) {
                    const correctP = document.createElement('p');
                    correctP.innerHTML = `Doğru Cevap: ${questionData.correct}`;
                    detailDiv.appendChild(correctP);
                }

                const explanationP = document.createElement('div');
                explanationP.classList.add('explanation');
                explanationP.innerHTML = questionData.explanation;
                detailDiv.appendChild(explanationP);

                resultDetailsDiv.appendChild(detailDiv);
            });
        }

        function startTimer() {
            timerBar.style.transition = 'none';
            timerBar.style.width = '100%';
            timerBar.style.backgroundColor = '#28a745';
            requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                    timerBar.style.transition = 'width 1s linear, background-color 0.5s ease';
                    timerInterval = setInterval(updateTimer, 1000);
                });
            });
        }

        function updateTimer() {
            timeLeft--;
            const percentageLeft = Math.max(0, (timeLeft / 180) * 100);
            timerBar.style.width = percentageLeft + '%';

            if (percentageLeft < 20) {
                timerBar.style.backgroundColor = '#dc3545';
            } else if (percentageLeft < 50) {
                timerBar.style.backgroundColor = '#ffc107';
            } else {
                timerBar.style.backgroundColor = '#28a745';
            }

            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerTextEl.innerText = `Kalan süre: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;

            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                handleTimeOut();
            }
        }

        function handleTimeOut() {
            const questionData = questions[currentQuestionIndex];
            if (!questionData || userAnswers[currentQuestionIndex] !== undefined) return;

            userAnswers[currentQuestionIndex] = {
                question: questionData.question,
                selected: "Süre Doldu",
                correct: questionData.correct,
                isCorrect: false,
                explanation: questionData.explanation
            };

            optionsDiv.classList.add('options-disabled');
            optionsDiv.querySelectorAll('.option').forEach(opt => opt.onclick = null);

            showNotification("Süre Doldu!", "incorrect");

            feedbackDiv.innerHTML = `<span class="incorrect" style="color:orange; font-weight:bold;">Süre Doldu!</span>`;
            const explanationDiv = document.createElement('div');
            explanationDiv.classList.add('explanation');
            explanationDiv.innerHTML = `Doğru Cevap: ${questionData.correct}`;
            feedbackDiv.appendChild(explanationDiv);

            nextButton.style.display = 'inline-block';
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerTextEl.innerText = `Kalan süre: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }

        function showNotification(message, type) {
            notificationDiv.innerText = message;
            notificationDiv.className = 'notification';
            notificationDiv.style.animation = 'none';

            if (type === 'correct') {
                notificationDiv.style.background = 'linear-gradient(135deg, #28a745 0%, #1e7e34 100%)';
                notificationDiv.style.color = '#ffffff';
            } else {
                notificationDiv.style.background = 'linear-gradient(135deg, #dc3545 0%, #a71d2a 100%)';
                notificationDiv.style.color = '#ffffff';
            }
            if (message.includes("Süre Doldu")) {
                notificationDiv.style.background = 'linear-gradient(135deg, #ff8c00 0%, #cc7000 100%)';
            }

            void notificationDiv.offsetWidth;
            notificationDiv.classList.remove('hidden');
            notificationDiv.style.animation = 'slideIn 0.5s forwards, slideOut 0.5s 2s forwards';

            notificationDiv.onanimationend = (event) => {
                if (event.animationName === 'slideOut') {
                    notificationDiv.classList.add('hidden');
                    notificationDiv.onanimationend = null;
                }
            };
        }

        document.addEventListener('DOMContentLoaded', () => {
            startScreen.classList.add('active');
            quizScreen.classList.remove('active');
            evaluationScreen.classList.remove('active');
            resultScreen.classList.remove('active');
            notificationDiv.classList.add('hidden');
        });
    </script>
</body>
</html>