name: Crypto Technical Analysis Bot

on:
  schedule:
    # Her 4 saatte bir: 00:05, 04:05, 08:05, 12:05, 16:05, 20:05 UTC
    # 5 dakika gecikme ile Binance mumlarinin kapanmasini bekle
    - cron: '5 0 * * *'
    - cron: '5 4 * * *'
    - cron: '5 8 * * *'
    - cron: '5 12 * * *'
    - cron: '5 16 * * *'
     - cron: '5 20 * * *'
  workflow_dispatch:  # Manuel tetikleme

jobs:
  run-crypto-analysis:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r crypto_requirements.txt

      - name: Run Crypto Analysis Bot
        env:
          # Egitim botu ile ayni secrets kullaniliyor
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          RUN_ONCE: 'true'
        run: |
          python crypto_telegram_bot.py
